{"ast":null,"code":"import _slicedToArray from\"C:/Users/Surya/OneDrive/Desktop/admitkard-assignment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import axios from\"axios\";import PhoneInput from\"react-phone-input-2\";import\"react-phone-input-2/lib/style.css\";import Snackbar from\"../snackbar/snackbar\";import{addUserNumber}from\"../../actions\";import\"./signin.scss\";import logo from\"../../assets/AK_logo.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SnackbarType={success:\"success\",fail:\"fail\"};var Signin=function Signin(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),mobileNumber=_useState2[0],setmobileNumber=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phoneError=_useState4[0],setPhoneError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),notification=_useState6[0],setNotification=_useState6[1];var snackbarRef=useRef(null);var isPhoneNumberValid=function isPhoneNumberValid(mobileNumber){var phoneRegex=/^[0-9]{12}$/;return phoneRegex.test(mobileNumber);};var handlePhoneChange=function handlePhoneChange(value){setmobileNumber(value);setPhoneError(\"\");};var handleSubmit=function handleSubmit(){if(!isPhoneNumberValid(mobileNumber)){setPhoneError(\"Invalid phone number\");return;}setPhoneError(\"\");generateOTP();setTimeout(function(){snackbarRef.current.show();},2000);};var generateOTP=function generateOTP(){var apiUrl=\"http://localhost:3001/generate-otp\";var data={mobileNumber:mobileNumber};var headers={\"Content-Type\":\"application/json\"};axios.post(apiUrl,data,{headers:headers}).then(function(response){//console.log(response);\nif(response.statusText===\"OK\"){localStorage.setItem(\"OTP\",response.data.otp);setNotification(\"OTP Sent Successfully!\");setTimeout(function(){dispatch(addUserNumber(mobileNumber));//console.log(mobileNumber);\nnavigate(\"/otp\");},2000);}}).catch(function(error){console.error(\"Error:\",error.message);setNotification(\"\".concat(error.message));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"signin-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(logo),alt:\"logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please sign in to your account\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"number-input-container\",children:/*#__PURE__*/_jsx(PhoneInput,{inputProps:{name:\"contact\",required:true,autoFocus:true},className:\"input\",country:\"in\",value:mobileNumber,onChange:function onChange(value){return handlePhoneChange(value);},inputStyle:{border:\"1px solid #ffd37d\",borderRadius:\"5px\",width:\"343px\",height:\"44px\",fontSize:\"18px\",color:\"#333\",fontWeight:\"500\",caretColor:\"blue\",fontStyle:\"normal\",fontFamily:\"Work Sans\"},containerStyle:{border:\"none\",backgroundColor:\"none\"}})}),phoneError?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:phoneError}):/*#__PURE__*/_jsx(\"p\",{children:\"We will send you a one time SMS message. Charges may apply.\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:handleSubmit,children:\"Sign In with OTP\"}),/*#__PURE__*/_jsx(Snackbar,{ref:snackbarRef,message:notification,type:SnackbarType.success})]});};export default Signin;","map":{"version":3,"names":["React","useState","useRef","useNavigate","useDispatch","axios","PhoneInput","Snackbar","addUserNumber","logo","jsx","_jsx","jsxs","_jsxs","SnackbarType","success","fail","Signin","dispatch","navigate","_useState","_useState2","_slicedToArray","mobileNumber","setmobileNumber","_useState3","_useState4","phoneError","setPhoneError","_useState5","_useState6","notification","setNotification","snackbarRef","isPhoneNumberValid","phoneRegex","test","handlePhoneChange","value","handleSubmit","generateOTP","setTimeout","current","show","apiUrl","data","headers","post","then","response","statusText","localStorage","setItem","otp","catch","error","console","message","concat","className","children","src","alt","inputProps","name","required","autoFocus","country","onChange","inputStyle","border","borderRadius","width","height","fontSize","color","fontWeight","caretColor","fontStyle","fontFamily","containerStyle","backgroundColor","onClick","ref","type"],"sources":["C:/Users/Surya/OneDrive/Desktop/admitkard-assignment/frontend/src/component/signin/signin.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport \"react-phone-input-2/lib/style.css\";\r\nimport Snackbar from \"../snackbar/snackbar\";\r\nimport { addUserNumber } from \"../../actions\";\r\n\r\nimport \"./signin.scss\";\r\nimport logo from \"../../assets/AK_logo.jpg\";\r\n\r\nconst SnackbarType = {\r\n  success: \"success\",\r\n  fail: \"fail\",\r\n};\r\n\r\nconst Signin = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [mobileNumber, setmobileNumber] = useState();\r\n  const [phoneError, setPhoneError] = useState(\"\");\r\n  const [notification, setNotification] = useState(\"\");\r\n  const snackbarRef = useRef(null);\r\n\r\n  const isPhoneNumberValid = (mobileNumber) => {\r\n    const phoneRegex = /^[0-9]{12}$/;\r\n    return phoneRegex.test(mobileNumber);\r\n  };\r\n\r\n  const handlePhoneChange = (value) => {\r\n    setmobileNumber(value);\r\n    setPhoneError(\"\");\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!isPhoneNumberValid(mobileNumber)) {\r\n      setPhoneError(\"Invalid phone number\");\r\n      return;\r\n    }\r\n    setPhoneError(\"\");\r\n    generateOTP();\r\n    setTimeout(() => {\r\n      snackbarRef.current.show();\r\n    }, 2000);\r\n  };\r\n\r\n  const generateOTP = () => {\r\n    const apiUrl = \"http://localhost:3001/generate-otp\";\r\n    const data = {\r\n      mobileNumber: mobileNumber,\r\n    };\r\n\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n    axios\r\n      .post(apiUrl, data, { headers: headers })\r\n      .then((response) => {\r\n        //console.log(response);\r\n        if (response.statusText === \"OK\") {\r\n          localStorage.setItem(\"OTP\", response.data.otp);\r\n          setNotification(\"OTP Sent Successfully!\");\r\n          setTimeout(() => {\r\n            dispatch(addUserNumber(mobileNumber));\r\n            //console.log(mobileNumber);\r\n            navigate(\"/otp\");\r\n          }, 2000);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error:\", error.message);\r\n        setNotification(`${error.message}`);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"signin-container\">\r\n      <img src={`${logo}`} alt=\"logo\" className=\"logo\" />\r\n      <div className=\"welcome-text\">\r\n        <h1>Welcome Back</h1>\r\n        <p>Please sign in to your account</p>\r\n      </div>\r\n      <div>\r\n        <div className=\"number-input-container\">\r\n          <PhoneInput\r\n            inputProps={{\r\n              name: \"contact\",\r\n              required: true,\r\n              autoFocus: true,\r\n            }}\r\n            className=\"input\"\r\n            country={\"in\"}\r\n            value={mobileNumber}\r\n            onChange={(value) => handlePhoneChange(value)}\r\n            inputStyle={{\r\n              border: \"1px solid #ffd37d\",\r\n              borderRadius: \"5px\",\r\n              width: \"343px\",\r\n              height: \"44px\",\r\n              fontSize: \"18px\",\r\n              color: \"#333\",\r\n              fontWeight: \"500\",\r\n              caretColor: \"blue\",\r\n              fontStyle: \"normal\",\r\n              fontFamily: \"Work Sans\",\r\n            }}\r\n            containerStyle={{\r\n              border: \"none\",\r\n              backgroundColor: \"none\",\r\n            }}\r\n          />\r\n        </div>\r\n        {phoneError ? (\r\n          <p className=\"error-message\">{phoneError}</p>\r\n        ) : (\r\n          <p>We will send you a one time SMS message. Charges may apply.</p>\r\n        )}\r\n      </div>\r\n      <button className=\"submit-button\" onClick={handleSubmit}>\r\n        Sign In with OTP\r\n      </button>\r\n      <Snackbar\r\n        ref={snackbarRef}\r\n        message={notification}\r\n        type={SnackbarType.success}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}